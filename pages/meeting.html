<!doctype html>

<html lang="en">
<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
  <link rel="stylesheet" href="../css/meeting.css">
  <title>日本GO</title>
</head>

<body>

    <!-- Home Page Title -->
    <div class="container-fluid" style="height: 100px" id="index-header">
        <img src="../images/logo1.JPG" class="nav-button nav-home" alt="Logo" width="auto" height="100%">
        <img src="../images/logo2.JPG" class="nav-button nav-home" alt="Logo" width="auto" height="80%">
        <img id="user-setting-button" src="../icons/user.svg" class="nav-button float-right" alt="User Icon" width="auto" height="60%" style="margin-top: 20px;">
    </div>

    <!-- Content -->
    <div class="container-fluid">
        <div class="d-flex justify-content-center" style="margin-top: 50px">
            <div class="d-flex flex-column justify-content-center videos">
                <label class="nav-item nav-link">Video 1</label>
            </div>
            <div class="d-flex flex-column justify-content-center videos">
                <label class="home-main-button-label">Video 2</label>
            </div>
        </div>
    </div>

    <div class="container-fluid">
        <div id="rowOfVideos2" class="d-flex justify-content-center" style="margin-top: 50px">
            <div class="d-flex flex-column justify-content-center videos">
                <label class="nav-item nav-link">Video 3</label>
            </div>
            <div class="d-flex flex-column justify-content-center videos">
                <label class="home-main-button-label">Video 4</label>
            </div>
        </div>
    </div>

    <div id="videoButtons" class="container-fluid">
        <div class="d-flex justify-content-center" style="margin-top: 0px">
            <div class="d-flex flex-column justify-content-center meeting-icons">
                <img id="camera" src="../icons/video.svg" alt="videos" width="100%" height="auto" data-toggle="tooltip" title="Toggle Camera">
            </div>
            <div class="d-flex flex-column justify-content-center meeting-icons">
                <img id="mute" src="../icons/microphone.svg" alt="microphone" width="auto" height="100%" data-toggle="tooltip" title="Mute">
            </div>
            <div class="d-flex flex-column justify-content-center meeting-icons">
                <img id="chat" src="../icons/comment.svg" alt="chat" width="100%" height="auto" data-toggle="tooltip" title="Toggle Chat">
            </div>
            <div class="d-flex flex-column justify-content-center meeting-icons">
                <img id="shareScreen" src="../icons/screen.svg" alt="shareScreen" width="100%" height="auto" data-toggle="tooltip" title="Share Screen">
            </div>
            <div class="d-flex flex-column justify-content-center meeting-icons">
                <img id="transcription" src="../icons/file-alt.svg" alt="transcription" width="auto" height="90%" data-toggle="tooltip" title="Enable Transcription">
            </div>
            <div class="d-flex flex-column justify-content-center meeting-icons">
                <img id="endCall" src="../icons/call.svg" alt="endCall" width="100%" height="auto" data-toggle="tooltip" title="End Call">
            </div>
        </div>
    </div>

    <div class="container-fluid hidden" id='transcript'>
        <div class="d-flex">
            <div id='transcriptText' class="d-flex flex-column scroll addBorder" style="width: 75%">
                <label>TEst</label> <br>
                <label>TEst</label> <br>
                <label>TEst</label> <br>
                <label>TEst</label> <br>
                <label>TEst</label> <br>
                <label>TEst</label> <br>
                <label>TEst</label> <br>
                <label>TEst</label> <br>
                <label>TEst</label> <br>
                <label>TEst</label> <br>
                <label>TEst</label> <br>
            </div>
            <!-- Need to center the buttons wrt the width -->
            <div id='transcriptButtons' class="d-flex flex-column justify-content-center addBorder" style="width: 25%" >
                <div class="d-flex justify-content-center">
                    <button id='speechButton' class="transcript-buttons">Speech Bubbles</button>
                </div>
                <div class="d-flex justify-content-center">
                    <button id='openTranscriptButton' class="transcript-buttons" style="margin-top: 20px">Open Saved Transcripts</button>
                </div>
                <div class="d-flex justify-content-center">
                    <button id='sendVocalButton' class="transcript-buttons" style="margin-top: 20px">Send Vocal Message</button>
                </div>
            </div>
        </div>
    </div>

    <div id="end-call-modal" class="own-modal">
        <div class="own-modal-header" id="end-call-modal-header">
            <label>Leave Meeting</label>
            <img src="../icons/times.svg" class="float-right" alt="Close" width="auto" height="60%" style="margin: 8px 12px 0px 0px" id="close-end-call-modal">
        </div>
        <div class="d-flex flex-column">
            <p class="center-text" style='margin: 20px 20px 20px 20px'>You are about to leave this meeting. Any active transcription will end and be saved under your "Saved Transcripts."</p>
            <p class="center-text" style='margin: 0px 20px 20px 20px'>Are you sure you want to leave?</p>
        </div>
        <div class="d-flex justify-content-center">
            <button id="leave-call-button" class="btn">Leave meeting</button>
            <button id='stay-meeting-button' class="btn" style="margin-left: 20px">Stay in meeting</button>
        </div>
    </div>
     
    <!-- JavaScript -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
    
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="../js/microsoft.cognitiveservices.speech.sdk.bundle.js"></script>
    <script src="../js/main.js"></script>

    <script>
       window.onload = function() {
            //Go home
            $('.nav-home').click(function() {
                var endCallModal = document.getElementById('end-call-modal');
                endCallModal.style.display = 'block';
            });

            $(".nav-home").hover(
                function(){
                    $(this).css({"cursor": "pointer", "opacity": "0.85"});
                }, function(){
                    $(this).css({"cursor": "default", "opacity": "1"});
            });

            // User settings button
            $('#user-setting-button').click(function() {
                alert("The 'User Settings' functionality was not implemented as it is out of the scope of this project, but still displayed to get a picture of what the full implemented system would offer.");
            });
            $("#user-setting-button").hover(
                function(){
                    $(this).css({"cursor": "pointer", "opacity": "0.85"});
                }, function(){
                    $(this).css({"cursor": "default", "opacity": "1"});
            });

            //End call
            document.getElementById('endCall').addEventListener('click', function (e) {
                var endCallModal = document.getElementById('end-call-modal');
                endCallModal.style.display = 'block';
            });

            document.getElementById('close-end-call-modal').addEventListener('click', function (e) {
                var endCallModal = document.getElementById('end-call-modal');
                endCallModal.style.display = 'none';
            });

            document.getElementById('leave-call-button').addEventListener('click', function (e) {
                window.location.href = "../index.html";
            });
            
            $("#leave-call-button").hover(
                function(){
                    $(this).css({"cursor": "pointer", "background-color": "#e60000"});
                }, function(){
                    $(this).css({"cursor": "default", "background-color": "#ff0000"});
            });

            document.getElementById('stay-meeting-button').addEventListener('click', function (e) {
                var endCallModal = document.getElementById('end-call-modal');
                endCallModal.style.display = 'none';
            });

            $("#stay-meeting-button").hover(
                function(){
                    $(this).css({"cursor": "pointer", "background-color": "#8c8c8c"});
                }, function(){
                    $(this).css({"cursor": "default", "background-color": "#a6a6a6"});
            });

            //Video conference button
            document.getElementById('camera').addEventListener('click', function (e) {
                alert("This feature was not implemented since it is not relevant to our project proposal.")
            });

            document.getElementById('mute').addEventListener('click', function (e) {
                alert("This feature was not implemented since it is not relevant to our project proposal.")
            });

            document.getElementById('shareScreen').addEventListener('click', function (e) {
                alert("This feature was not implemented since it is not relevant to our project proposal.")
            });

            document.getElementById('chat').addEventListener('click', function (e) {
                alert("This feature was not implemented since it is not relevant to our project proposal.")
            });

            //Transcript buttons
            document.getElementById('speechButton').addEventListener('click', function (e) {
                alert("This feature will be implemented in our Beta System");
            });

            document.getElementById('openTranscriptButton').addEventListener('click', function (e) {
                alert("This feature was not implemented since it is not relevant to our project proposal.")
            });

            document.getElementById('sendVocalButton').addEventListener('click', function (e) {
                alert("Do something.")
            });

            //Open up the transcript 
            document.getElementById('transcription').addEventListener('click', function (e) {
                if(toggle == 0){
                    var row2 = document.getElementById('rowOfVideos2');
                    row2.style.marginTop = '10px';
                    let myElements = document.querySelectorAll(".videos");

                    for (let i = 0; i < myElements.length; i++) {
                        myElements[i].style.width = '400px';
                        myElements[i].style.height = '200px';
                    }
                    setTranscriptHeight();
                    var transcript = document.getElementById('transcript');
                    transcript.style.display = 'block';
                    toggle = 1;
                }
                else{
                    var row2 = document.getElementById('rowOfVideos2');
                    row2.style.marginTop = '50px';
                    let myElements = document.querySelectorAll(".videos");

                    for (let i = 0; i < myElements.length; i++) {
                        myElements[i].style.width = '500px';
                        myElements[i].style.height = '250px';
                    }
                    var transcript = document.getElementById('transcript');
                    transcript.style.display = 'none';
                    toggle = 0;
                }
            });
        };
    </script>

</body>
</html>